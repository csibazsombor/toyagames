<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>CIKOIN</title>

<style>
/* ====== Global reset ====== */
* { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; }
:root{
  /* iOS safe areas */
  --inset-top: env(safe-area-inset-top, 0px);
  --inset-right: env(safe-area-inset-right, 0px);
  --inset-bottom: env(safe-area-inset-bottom, 0px);
  --inset-left: env(safe-area-inset-left, 0px);
}

/* ====== Base ====== */
body { 
  height:100%;
  overflow:hidden; 
  font-family:'Comic Sans MS','Chalkboard SE','Arial Rounded MT Bold',cursive;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  /* Don‚Äôt accidentally select text / long-press on mobile */
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -webkit-touch-callout: none;
  touch-action: none;
}

/* Remove focus outlines for UI buttons (keyboard nav not needed here) */
button, [role="button"], input, select, textarea {
  outline: none;
}

/* ====== Game canvas ====== */
canvas {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  display:block;
  z-index: 1;
  /* allow mouse/touch interaction with the game */
  pointer-events: auto;
}

/* ====== Shared UI layer ====== */
#ui, #stamina, #controls, #gamepad, #stick, #jumpBtn,
#inventory, #potionBtn, #loading-screen {
  position: relative;
  z-index: 10;
}

/* Keep CSS2D labels click-through */
.hp-label { pointer-events:none; }

/* ====== Loading screen ====== */
#loading-screen {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, #89cff0, #b19cff);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 18px;
  z-index: 9999999;
  color: white;
  transition: opacity 0.6s ease;
}

/* ====== Debug / Counter HUD (coins etc.) ====== */
/* Desktop: top-left; Mobile: top-left but pushed below stamina so they never overlap */
#ui {
  position: fixed;
  top: calc(var(--inset-top) + 16px);
  left: calc(var(--inset-left) + 16px);
  color:#fff;
  text-shadow:0 3px 6px rgba(0,0,0,0.4);
  font-size:16px;
  font-weight:bold;
  background:rgba(255,255,255,0.16);
  padding:12px 18px;
  border-radius:16px;
  backdrop-filter:blur(10px);
  border:3px solid rgba(255,255,255,0.28);
  pointer-events:none;
}

/* ====== Stamina bar ====== */
/* Desktop: bottom-center; Mobile: top-center (under safe area) */
#stamina {
  position: fixed;
  width: 320px;
  height: 28px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,0.2);
  border: 3px solid rgba(255,255,255,0.5);
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  backdrop-filter: blur(12px);
  pointer-events: none;
  bottom: calc(var(--inset-bottom) + 60px); /* desktop default */
}
#staminaFill {
  height:100%;
  background: linear-gradient(90deg, #fbbf24, #f59e0b);
  transition: width 0.15s ease-out;
  box-shadow: inset 0 0 20px rgba(255,255,255,0.3);
}

/* ====== Inventory readout ====== */
#inventory {
  position: fixed;
  bottom: calc(var(--inset-bottom) + 110px);
  left: 50%;
  transform: translateX(-50%);
  padding: 10px 18px;
  font-size: 20px;
  font-weight: bold;
  color: white;
  background: rgba(255,255,255,0.25);
  border: 3px solid rgba(255,255,255,0.6);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  pointer-events: none;
}

/* ====== Potion button (mobile) ====== */
#potionBtn {
  display:none; /* enabled by JS on mobile */
  position: fixed;
  bottom: calc(var(--inset-bottom) + 140px);
  right: calc(var(--inset-right) + 20px);
  width: 70px; height: 70px;
  border-radius: 50%;
  font-size: 26px;
  font-weight: bold;
  border: 3px solid rgba(255,255,255,0.7);
  background: linear-gradient(135deg, #ff6b6b, #fa5252);
  color: white;
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
  backdrop-filter: blur(12px);
  z-index: 100;
  user-select:none;
}

/* ====== Desktop controls panel ====== */
#controls {
  position:fixed;
  top: calc(var(--inset-top) + 16px);
  right: calc(var(--inset-right) + 16px);
  background:rgba(255,255,255,0.16);
  padding:18px;
  border-radius:18px;
  color:#fff;
  font-size:13px;
  max-width:240px;
  pointer-events:none;
  backdrop-filter:blur(10px);
  border:3px solid rgba(255,255,255,0.28);
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
}
#controls h3 { margin-bottom:10px; font-size:16px; color:#fbbf24; }
#controls .key {
  display:inline-block;
  background:rgba(255,255,255,0.3);
  padding:3px 8px;
  border-radius:8px;
  font-weight:bold;
  margin:0 2px;
  border:2px solid rgba(255,255,255,0.4);
}

/* ====== Mobile joystick ====== */
#gamepad {
  display:none; /* enabled by JS on mobile */
  position:fixed;
  bottom: calc(var(--inset-bottom) + 24px);
  left:  calc(var(--inset-left) + 22px);
  width: 140px; height: 140px;
  background:rgba(255,255,255,0.2);
  border:4px solid rgba(255,255,255,0.4);
  border-radius:50%;
  touch-action:none;
  backdrop-filter:blur(10px);
  box-shadow:0 8px 25px rgba(0,0,0,0.3);
  user-select:none;
}
#stick {
  position:absolute; top:50%; left:50%;
  width:55px; height:55px;
  background:linear-gradient(135deg, #fbbf24, #f59e0b);
  border:4px solid rgba(255,255,255,0.8);
  border-radius:50%;
  transform:translate(-50%,-50%);
  pointer-events:none;
  user-select:none;
}

/* ====== Mobile jump button ====== */
#jumpBtn {
  display:none; /* enabled by JS on mobile */
  position:fixed;
  bottom: calc(var(--inset-bottom) + 26px);
  right:  calc(var(--inset-right) + 24px);
  width:80px; height:80px;
  background:linear-gradient(135deg, #ec4899, #8b5cf6);
  border:4px solid rgba(255,255,255,0.5);
  border-radius:50%;
  color:#fff; font-size:16px; font-weight:bold;
  box-shadow:0 8px 25px rgba(0,0,0,0.3);
  backdrop-filter:blur(10px);
  z-index:100;
  user-select:none;
}
#jumpBtn:active { transform:scale(0.90); }

/* ====== HP label (if you assign class on your CSS2D labels) ====== */
.hp-label .hp-bar {
  width:110px; height:16px; border-radius:10px;
  background:rgba(0,0,0,0.35); border:2px solid rgba(255,255,255,0.7);
  position:relative; overflow:hidden;
}
.hp-label .hp-fill {
  position:absolute; left:0; top:0; bottom:0; width:100%;
  background:linear-gradient(90deg, #22c55e, #16a34a);
  transition:width .15s ease;
}
.hp-label .hp-text {
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  color:#fff; font-size:11px; font-weight:bold; text-shadow:0 2px 4px rgba(0,0,0,.6);
}

/* ====== Subtle glow (no transform so it won't break centering) ====== */
#ui, #controls, #stamina, #gamepad, #jumpBtn, #inventory, #potionBtn {
  animation: softGlow 3s ease-in-out infinite alternate;
}
@keyframes softGlow {
  from { filter: drop-shadow(0 0 0px rgba(255,255,255,0.28)); }
  to   { filter: drop-shadow(0 0 12px rgba(255,255,255,0.55)); }
}

/* ====== Mobile layout tweaks ====== */
@media (max-width: 768px) {
  /* Move stamina to the top center on mobile */
  #stamina {
    top: calc(var(--inset-top) + 10px);
    bottom: auto;
    width: min(78vw, 460px);
    height: 22px;
    border-width: 3px;
  }

  /* Push UI down a bit so it never overlaps stamina */
  #ui {
    top: calc(var(--inset-top) + 42px);
    left: calc(var(--inset-left) + 14px);
    transform: none;
    font-size: 15px;
    padding: 10px 14px;
  }

  /* Inventory a bit higher to avoid thumb area */
  #inventory {
    bottom: calc(var(--inset-bottom) + 110px);
    font-size: 18px;
  }

  /* Larger joystick area for thumbs */
  #gamepad {
    width: 150px; height: 150px;
    bottom: calc(var(--inset-bottom) + 22px);
    left:  calc(var(--inset-left) + 18px);
  }
  #stick { width: 60px; height: 60px; }

  /* Jump button stays clear of edges/safe areas */
  #jumpBtn {
    bottom: calc(var(--inset-bottom) + 22px);
    right:  calc(var(--inset-right) + 18px);
  }
}

</style>
</head>

<body>
<div id="loading-screen">
  <div class="loader-cat">
    <img src="assets/loading-cat.png" alt="loading cat">
  </div>
  <div id="loader-text">Loading...</div>
  <div id="loader-bar">
    <div id="loader-fill"></div>
  </div>
  <div id="loader-percent">0%</div>
</div>
</div>
  <div id="ui">
    <button id="potionBtn">üçé</button>
    <div id="inventory"></div>
    <div id="debug"></div>
  </div>

 
  <div id="stamina">
    <div id="staminaFill" style="width:100%"></div>
    <div id="staminaLabel">‚ö° ENERGY</div>
  </div>
  
  <div id="gamepad">
    <div id="stick"></div>
  </div>
  
  <div id="jumpBtn">JUMP</div>
  
  <div id="controls">
    <h3>üéÆ Controls</h3>
    <p><span class="key">WASD</span> Move</p>
    <p><span class="key">Sprint</span> Auto</p>
    <p><span class="key">Mouse</span> Camera</p>
    <p><span class="key">Space</span> Jump</p>
  </div>

<script type="importmap">
{
  "imports": {
    "three": "./three.module.js",
    "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
  }
}
</script>

<script type="module" src="./main.js"></script>
</body>
</html>
